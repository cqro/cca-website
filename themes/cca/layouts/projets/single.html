{{ define "main" }}
    {{ $dir := .Permalink }}
    <div class="md:flex">
        <aside class="md:h-screen md:sticky md:top-4 sm:w-full md:w-1/3 mb-8 mr-8 pt-10 text-sm">
            <span class="text-gray-400">
                {{ .Params.categorie }}
            </span>

            <h3 class="text-gray-200">{{ .Title }}</h3>

            <dl class="flex flex-wrap divide-y divide-gray-500 pt-2">

                {{ with .Content }}
                <div class="w-full flex-none flex items-baseline pb-2">
                    <dd>
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.type_projet }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Type de projet
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.type_contrat }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Type de contrat
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.localisation }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Localisation
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.maitre_ouvrage }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Maître d'ouvrage
                    </dt>
                    <dd class="px-2"> 
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.maitre_oeuvre }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Maître d'œuvre
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.budget }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Budget
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}

                {{ with .Params.surface }}
                <div class="w-full flex-none flex items-baseline py-2">
                    <dt class="w-2/5 sm:w-1/3 flex-none tracking-wide">
                        Surface
                    </dt>
                    <dd class="px-2">
                        {{ . }}
                    </dd>
                </div>
                {{end}}
            </dl>

            {{ range $document_path := .Params.Fiches }}
            <div class="flex justify-between w-full text-xs bg-gray-800 rounded mt-4">
              <div class="m-4 text-center p-4 hover:bg-gray-700 rounded">
                <a href="{{ $dir }}{{ $document_path }}" alt="{{ $document_path }}" download>
                  {{- partial "pdf-icon.html" . -}}
                  Fiche du projet
                </a>
              </div>
              {{ end }}

              <div class="m-4 text-center p-4 hover:bg-gray-700 rounded">
                {{- partial "portfolio.html" . -}}
              </div>
            </div>
        </aside>

        <main class="min-h-screen md:w-2/3">
          {{ range $youtube_video_id := .Params.youtube_video_ids }}
          <div class="aspect-w-16 aspect-h-9 border border-gray-600 rounded-sm mb-4">
            <iframe
                class="w-full h-full"
                src="https://www.youtube.com/embed/{{ $youtube_video_id }}"
                title="YouTube video player"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
                allowfullscreen>
            </iframe>
          </div>
          {{ end }}

          {{ range $image_path := .Params.Images }}
          <div class="border border-gray-600 rounded-sm mb-4">
            <img class="mx-auto" src="{{ $dir }}{{ $image_path }}" alt="{{ $image_path }}">
          </div>
          {{ end }}
        </main>
    </div>
    {{ end }}
